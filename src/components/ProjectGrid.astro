---
import ProjectCard from './ProjectCard.astro';
import projects from '../data/projects.json';
---

<section class="projects reveal" id="projects">
  <div class="section-label">Projects â€” 01</div>
  <div class="project-grid">
    {projects.map(project => (
      <ProjectCard
        name={project.name}
        tag={project.tag}
        shipped={project.shipped}
        description={project.description}
        url={project.url}
        mrr={project.mrr}
        logo={project.logo}
      />
    ))}
    {projects.length % 2 !== 0 && (
      <div class="empty-cell">
        <span class="empty-watermark">studio.yreh</span>
      </div>
    )}
  </div>
</section>

<style>
  .project-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1px;
    background: var(--border);
    border: 1px solid var(--border);
  }

  .empty-cell {
    position: relative;
    background-color: var(--bg);
    background-image: url("data:image/svg+xml,%3Csvg width='8' height='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cline x1='0' y1='8' x2='8' y2='0' stroke='%23ddddd8' stroke-width='0.4'/%3E%3C/svg%3E");
    background-size: 8px 8px;
    min-height: 320px;
    overflow: hidden;
  }

  .empty-watermark {
    position: absolute;
    bottom: 1.7em;
    right: -1em;
    font-family: system-ui, -apple-system, sans-serif;
    font-weight: 700;
    font-size: clamp(5rem, 10vw, 8rem);
    text-transform: uppercase;
    letter-spacing: -0.02em;
    line-height: 1;
    color: var(--border);
    white-space: nowrap;
    pointer-events: none;
    user-select: none;
    transform: rotate(-30deg);
    transform-origin: bottom right;
  }

  @media (max-width: 768px) {
    .project-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
